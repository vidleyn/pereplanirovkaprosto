# –û—Ç—á–µ—Ç –æ –º–∏–≥—Ä–∞—Ü–∏–∏ Auth —Å Java –Ω–∞ Node.js

## ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (Controllers)

#### ‚úÖ AuthController
- **Java**: `/api/auth` - register, login, user, logout
- **Node.js**: `/api/auth` - register, login, user, logout
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω
- **–†–∞–∑–ª–∏—á–∏—è**: 
  - Java –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Spring Security AuthenticationManager
  - Node.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —á–µ—Ä–µ–∑ User.findByUsername

#### ‚úÖ DashboardController
- **Java**: `/dashboard` - GET
- **Node.js**: `/dashboard` - GET
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω
- **–†–∞–∑–ª–∏—á–∏—è**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–∞

#### ‚úÖ FloorPlanController
- **Java**: `/api/floorplan` - health (GET), analyze (POST)
- **Node.js**: `/api/floorplan` - health (GET), analyze (POST)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - –í Node.js –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ `authenticateToken` middleware
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è multer –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞

### 2. –°–µ—Ä–≤–∏—Å—ã (Services)

#### ‚úÖ AuthService
- **Java**: registerUser, loginUser
- **Node.js**: registerUser, loginUser
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω
- **–†–∞–∑–ª–∏—á–∏—è**:
  - Java –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Spring Security PasswordEncoder
  - Node.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç bcrypt –Ω–∞–ø—Ä—è–º—É—é
  - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–∞

#### ‚úÖ FloorApiClient
- **Java**: isHealthy(), analyzeFloorPlan()
- **Node.js**: isHealthy(), analyzeFloorPlan()
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω
- **–†–∞–∑–ª–∏—á–∏—è**:
  - Java –∏—Å–ø–æ–ª—å–∑—É–µ—Ç RestTemplate
  - Node.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç axios
  - –û–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π API endpoint: `http://localhost:8000`
  - –í Node.js –¥–æ–±–∞–≤–ª–µ–Ω timeout (5000ms –¥–ª—è health, 60000ms –¥–ª—è analyze)

### 3. –ú–∞—Ä—à—Ä—É—Ç—ã (Routes)

#### ‚úÖ Auth Routes
- `/api/auth/register` - POST ‚úÖ
- `/api/auth/login` - POST ‚úÖ
- `/api/auth/user` - GET ‚úÖ
- `/api/auth/logout` - POST ‚úÖ

#### ‚úÖ Dashboard Routes
- `/dashboard` - GET ‚úÖ

#### ‚úÖ FloorPlan Routes
- `/api/floorplan/health` - GET ‚úÖ (–±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ - –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
- `/api/floorplan/analyze` - POST ‚úÖ (—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
- –í Java –≤–µ—Ä—Å–∏–∏ –≤—Å–µ `/api/**` —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–≤–∫–ª—é—á–∞—è health)
- –í Node.js –≤–µ—Ä—Å–∏–∏ health check –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–ª—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
- Analyze —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏—è—Ö ‚úÖ

### 4. Middleware –∏ Security

#### ‚úÖ JWT Service
- **Java**: JwtService —Å Spring Security
- **Node.js**: JwtService —Å jsonwebtoken
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω

#### ‚úÖ Authentication Middleware
- **Java**: JwtAuthenticationFilter (Spring Security)
- **Node.js**: authenticateToken middleware
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω

### 5. –ú–æ–¥–µ–ª–∏ (Models)

#### ‚úÖ User Model
- **Java**: JPA Entity —Å Role enum
- **Node.js**: PostgreSQL –º–æ–¥–µ–ª—å —Å Role enum
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω

## üìã –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è Java (–Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞)

### 1. MultipartInputStreamFileResource
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è Spring –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MultipartFile
- **Node.js —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç**: Multer –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `req.file`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–∫—Ä—ã—Ç–∞ multer

### 2. RestTemplateConfig
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è HTTP –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è Spring
- **Node.js —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç**: Axios —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ FloorApiClient
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, axios —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏

### 3. SecurityConfig
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Spring Security
- **Node.js —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç**: Express middleware (authMiddleware.js)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–∫—Ä—ã—Ç–∞ middleware

### 4. CustomUserDetailsService
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: Spring Security UserDetailsService
- **Node.js —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç**: –ü—Ä—è–º–∞—è —Ä–∞–±–æ—Ç–∞ —Å User –º–æ–¥–µ–ª—å—é
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–∫—Ä—ã—Ç–∞ –≤ AuthService

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Dependencies)

#### ‚úÖ –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- `express` - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ ‚úÖ
- `pg` - PostgreSQL –¥—Ä–∞–π–≤–µ—Ä ‚úÖ
- `bcrypt` - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π ‚úÖ
- `jsonwebtoken` - JWT —Ç–æ–∫–µ–Ω—ã ‚úÖ
- `dotenv` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚úÖ
- `cors` - CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚úÖ
- `multer` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ ‚úÖ
- `axios` - HTTP –∫–ª–∏–µ–Ω—Ç ‚úÖ
- `express-validator` - –≤–∞–ª–∏–¥–∞—Ü–∏—è ‚úÖ
- `form-data` - —Ä–∞–±–æ—Ç–∞ —Å FormData ‚úÖ

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `FLOORPLAN_API_URL` - URL —Å–µ—Ä–≤–∏—Å–∞ –∞–Ω–∞–ª–∏–∑–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `http://localhost:8000`)
- `PORT` - –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 8080)
- `JWT_SECRET` - –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT
- `DATABASE_URL` - URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

### –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è floorplan_analyzer –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã:

1. ‚úÖ **FloorPlanController** - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–æ–∫
2. ‚úÖ **FloorApiClient** - –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Python —Å–µ—Ä–≤–∏—Å–æ–º
3. ‚úÖ **floorPlanRoutes** - –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π multer
4. ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –∑–∞—â–∏—Ç–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/analyze` —á–µ—Ä–µ–∑ middleware

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–∞:

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞ (`/health`)
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∏ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–∞–π–ª–∞ (`/analyze`)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (—Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üéØ –í—ã–≤–æ–¥—ã

**–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã —Å Java –Ω–∞ Node.js.**

–û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ:
- ‚úÖ **FloorPlanController** –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- ‚úÖ **FloorApiClient** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Python —Å–µ—Ä–≤–∏—Å–æ–º
- ‚úÖ –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –∑–∞—â–∏—â–µ–Ω—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ multer
- ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

**–°–µ—Ä–≤–∏—Å—ã –¥–ª—è floorplan_analyzer –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

